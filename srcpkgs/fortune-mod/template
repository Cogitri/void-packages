# Template file for 'fortune-mod'
pkgname=fortune-mod
version=2.6.2
revision=1
wrksrc="fortune-mod-fortune-mod-${version}"
build_wrksrc=fortune-mod
build_style=cmake
configure_args="
 -DNO_OFFENSIVE:BOOL=FALSE
 -DCOOKIEDIR:STRING=/usr/share/fortunes
 -DOCOOKIEDIR:STRING=/usr/share/fortunes-offensive
 -DLOCALDIR:STRING=/usr/share/fortunes
 -DLOCALODIR:STRING=/usr/share/fortunes-offensive"
hostmakedepends="recode perl"
makedepends="recode-devel"
short_desc="Unix fortune command for displaying a random quotation"
maintainer="Rasmus Thomsen <rasmus.thomsen@protonmail.com>"
license="BSD-4-Clause-UC"
homepage="https://www.shlomifish.org/open-source/projects/fortune-mod/"
distfiles="https://github.com/shlomif/fortune-mod/archive/fortune-mod-${version}.tar.gz"
checksum=89223bb649ea62b030527f181539182d6a17a1a43b0cc499a52732b839f7b691

pre_configure() {
	# Upstream hardcodes binary locations
	sed \
		-e 's/"games"/"bin"/' \
		-e 's/"sbin"/"bin"/' \
		-i CMakeLists.txt
}

post_install() {
	vlicense ../LICENSE
}

fortune-mod-offensive_package() {
	depends="${sourcepkg}-${version}_${revision}"
	short_desc+=" - offensive fortunes"
	pkg_install() {
		vmove usr/share/fortunes-offensive
	}
}
